<div *ngIf="isAdmin != 'admin'" id="header">
  <div *ngIf="helpOpen" class="w-100 mx-auto open" id="widget-cs-row" style="display: block">
    <div class="header-container" style="height: 192px; opacity: 1">
      <div class="row" id="header_customer_support">
        <div class="col-4 pr-0 widget-cs-info">
          <div class="widget-cs-info-header text-center">
            ¿Necesitas ayuda?
          </div>
          <hr class="widget-hr">
        </div>
        <div class="col-7 px-0 widget-cs-info">
        </div>
        <div class="col-1 pl-0 widget-cs-info">
        </div>
      </div>
    </div>
  </div>
  <div id="header_mask">
    <div id="info_top_bar" class="header-container">
      <div class="row h-100">
        <div class="col pr-10">
        </div>
        <div class="col">
          <div class="shipping-msg">
          </div>
        </div>
        <div class="col pr-0">
          <div class="choose-country">
            <a id="choose-country">
            </a>
            <a id="choose-country">
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="header_search_bar" class="sticky-top">
  <div id="header_search_area" class="header-container">
    <div class="row">
      <div class="col-auto">
        <div class="row">
          <div *ngIf="openAndExit==false" id="the_h_menu" class="col-auto">
            <div [ngClass]= "isAdmin != 'admin' ? 'disableDiv': 'enableDiv'" class="menu-btn">
              <i (click)="onToggleSidenav(); openAndExit = true" class="fal fa-bars"></i>
            </div>
          </div>
          <div *ngIf="openAndExit==true" id="the_h_menu" class="col-auto">
            <div style="background: silver;" [ngClass]= "isAdmin != 'admin' ? 'disableDiv': 'enableDiv'" class="menu-btn">
              <i (click)="onToggleSidenav(); openAndExit = false" class="fal fa-times"></i>
            </div>
          </div>
          <div class="logo-container col-auto">
            <a href="http://localhost:4200/" id="logo">
              <img src="assets/Logo_Charlas.png" class="logo">
            </a>
          </div>
        </div>
      </div>
      <div class="col">
        <div id="quick-search_container">

        </div>
      </div>
      <div class="col-auto">
        <div class="row">
          <div class="top-help-container col-auto">
            <a id="top-help-link" class="top-help-link" *ngIf = "!isLogged || isAdmin != 'admin'" (click)="helpOpen = !helpOpen">
              <i class="fas fa-question-circle"></i>
              <span style="margin-top: 3px">Ayuda</span>
            </a>
          </div>
          <div class="col-auto loyalty-header-container">
            <a class="loyalty-tooltip-link">
              <span style="margin-top: 3px">Premium</span>
            </a>
          </div>
          <div class="login-top-container col-auto">
            <div class="login-links-holder w-100">
              <span *ngIf = "!isLogged" class="login-links-holder-left">
                <a type="button" (click)="registerModal = 0; loginModal = 1; mLogin(modalLogin)" style="margin-top: 3px" id="login__link" class="login-links-holder__link">Identificarse</a>
              </span>
              <span *ngIf = "!isLogged" class="login-links-holder-right">
                <a type="button" (click)="registerModal = 1; loginModal = 0; mLogin(modalLogin)" style="margin-top: 3px" id="register__link" class="login-links-holder">Crear Cuenta</a>
              </span>
              <span *ngIf = "isLogged" class="login-links-holder-right">
                <a (click) = "onLogout()" style="margin-top: 3px" id="logout__link" class="login-links-holder">Cerrar Sesión</a>
              </span>
            </div>
          </div>
          <div class="top-mini-cart-container col-auto">
            <a [routerLink]="'/cart'" type="button" class="show-mini-cart nav-link">
              <div class="show-mini-cart-cont">
                <span class="top-minicart-info">
                  <span class="top-minicart-info_num-items d-none" id="cartItemCount">
                  </span>
                  <i class="fas fa-shopping-cart"></i>
                </span>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #modalLogin let-modal>
  <div class="contenedor">
    <div class="menu-login">
      <div *ngIf="isLogged == false" class="row">
        <div class="col-md-3">
          <div type="button" (click)="loginModal = 1; registerModal = 0" [ngClass]="loginModal == 1 ? 'row titleLoginW text-center': 'row titleLogin text-center'">
            <span style="margin-top: 50px">IDENTIFICARSE</span>
          </div>
          <div type="button" (click)="loginModal = 0; registerModal = 1" [ngClass]="registerModal == 1 ? 'row titleRegisterW text-center': 'row titleRegister text-center'">
            <span style="margin-top: 50px">NUEVA CUENTA</span>
          </div>
        </div>
        <div *ngIf="loginModal==1" class="col-md-9 content-login">
          <div class="authentication__login">
            <div class="login-form">
              <div (click)="modal.dismiss()" class="popup_close_button">
                <i class="fal fa-times"></i>
              </div>
              <app-login></app-login>
              <div (click)="modal.dismiss(); modalForgetPassword(forgetPassword)" class="recover-password">
                  ¿Has olvidado tu contraseña?
              </div>

              <div class="spliter spliter--with-seps">
                  <div class="spliter__sep"></div>
                  <div class="spliter__middle"></div>
                  <div class="spliter__sep"></div>
              </div>
            </div>
          </div>
        </div>
        <div *ngIf="registerModal==1" class="col-md-9 content-register">
          <div class="authentication__login">
            <div class="login-form">
              <div (click)="modal.dismiss()" class="popup_close_button">
                <i class="fal fa-times"></i>
              </div>
                <app-register></app-register>
              <div class="mt-4 row">
                <div class="col-md-12">
                  <div class="spliter spliter--with-seps">
                      <div class="spliter"></div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <span style="font-size: 10px">Si tienes alguna cuestión, no dudes en contactarnos. Estamos siempre a tu disposición.</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="isLogged == true" class="row">
        <div (click)="modal.dismiss()" class="popup_close_button">
          <i class="fal fa-times"></i>
        </div>
      </div>
    </div>  
  </div>
</ng-template>

<ng-template #forgetPassword let-modal>
  <span class="titleModalForgetPassword">Solicitar nueva contraseña</span>
  <div class="col-md-12">
  
      <div class="login-form">
        <div (click)="modal.dismiss()" class="popup_close_button">
          <i class="fal fa-times"></i>
        </div>
        <form [formGroup] ="passwordForm" (ngSubmit)="changePassword()">
          <div style="margin: 15px;" class="material-field">
              <label class="label-unique-email">E-mail<span class="material__required">*</span></label>
              <span class="sublabel"></span>
              <input
                  id="emailModalReset"
                  type="email" 
                  formControlName="username" 
                  required
              />
          </div>
          <div style="margin-left: 4px; margin-botton: 4px" class="row mt-5">
            <div class="col-sm-6">
                <input 
                    [disabled]="passwordForm.invalid" 
                    (click)="modal.close(); modalcorrectPassword(correctPassword)"
                    id="btnRecuperarPass" 
                    class="button button--red button--large w-100" 
                    type="submit" 
                    value="Recuperar la contraseña">
            </div>
          </div>   
        </form>
      </div>
    
    <div class="titleModalEnd">
      *Importante: Es posible que recibas un correo electrónico después de completar este formulario.
    </div>
  </div>
</ng-template>

<ng-template #correctPassword let-modal>
  <span class="titleModalForgetPassword">Solicitar nueva contraseña</span>
  <div class="col-md-12">
      <div class="login-form">
        <div (click)="modal.dismiss()" class="popup_close_button">
          <i class="fal fa-times"></i>
        </div>
        <div class="row">
          <div class="col-md-2 titleVerify">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="col-md-10 titleVerifyText">
            Se ha enviado un email. Cuando recibas tu información de usuario, sigue las indicaciones para restablecer tu contraseña.
          </div>
        </div>
      </div>
    
    <div class="titleModalEnd">
      *Importante: Es posible que recibas un correo electrónico después de completar este formulario.
    </div>
  </div>
    
</ng-template>